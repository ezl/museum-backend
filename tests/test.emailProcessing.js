let event = {
  "Records": [
    {
      "EventSource": "aws:sns",
      "EventVersion": "1.0",
      "EventSubscriptionArn": "arn:aws:sns:us-west-2:708610861541:new-email:d01751f6-e50b-46a2-b491-ea32edf8afb3",
      "Sns": {
        "Type": "Notification",
        "MessageId": "bdd1f7e5-69e8-50b1-a989-a26f15d9f703",
        "TopicArn": "arn:aws:sns:us-west-2:708610861541:new-email",
        "Subject": "Amazon SES Email Receipt Notification",
        "Message": "{\"notificationType\":\"Received\",\"mail\":{\"timestamp\":\"2019-06-24T07:21:20.478Z\",\"source\":\"ravipatel.ce@gmail.com\",\"messageId\":\"iusasvbnq0o7la1jle1d7ltvpsn7ivn9laoi4701\",\"destination\":[\"connect@morganstreetpartners.com\"],\"headersTruncated\":false,\"headers\":[{\"name\":\"Return-Path\",\"value\":\"<ravipatel.ce@gmail.com>\"},{\"name\":\"Received\",\"value\":\"from mail-ed1-f53.google.com (mail-ed1-f53.google.com [209.85.208.53]) by inbound-smtp.us-west-2.amazonaws.com with SMTP id iusasvbnq0o7la1jle1d7ltvpsn7ivn9laoi4701 for connect@morganstreetpartners.com; Mon, 24 Jun 2019 07:21:20 +0000 (UTC)\"},{\"name\":\"X-SES-Spam-Verdict\",\"value\":\"PASS\"},{\"name\":\"X-SES-Virus-Verdict\",\"value\":\"PASS\"},{\"name\":\"Received-SPF\",\"value\":\"pass (spfCheck: domain of _spf.google.com designates 209.85.208.53 as permitted sender) client-ip=209.85.208.53; envelope-from=ravipatel.ce@gmail.com; helo=mail-ed1-f53.google.com;\"},{\"name\":\"Authentication-Results\",\"value\":\"amazonses.com; spf=pass (spfCheck: domain of _spf.google.com designates 209.85.208.53 as permitted sender) client-ip=209.85.208.53; envelope-from=ravipatel.ce@gmail.com; helo=mail-ed1-f53.google.com; dkim=pass header.i=@gmail.com; dmarc=pass header.from=gmail.com;\"},{\"name\":\"X-SES-RECEIPT\",\"value\":\"AEFBQUFBQUFBQUFGdXg2WlZsSEFnNE9xMUNsZm5JQUpVYktWVFZ6Yy9uMWpvaHhqaEJoU3I4T2ZCL09WYjJ6N2p1dDE2Y3JPMkZTVzFnYng4RUhTWjlnYkxGTWRaS2dTczZKOVp1cFRKRTNBRitVdG9jUVdVdjc5eEY0Z3Y3djUzdUVlL0tveUQ5VXQ2bEFySGpMV0VObGlDV3U0L0lXRjhYNGIwL2w5c2lKaEtxMFN3ZjlXUGRtUnZma3FvSEI1c3JYNmdaWUxWcy9DTTlTQnlNUmtrZlZmTkZzVkVhM2cxcnRCUXc4RHN1K2JST3p1c0t1dGtweFdIWnpFbkpJWTEwZXFWelJNaHNtZHpjRHNNcEhkbUZMQ3MrTVB4OVMxV2Frb290OUNaRTltM1pSdXFMNXg1M0E9PQ==\"},{\"name\":\"X-SES-DKIM-SIGNATURE\",\"value\":\"a=rsa-sha256; q=dns/txt; b=djumHj/RQn002SeuJ61hm4FfckLtsd+AyW8Nfo73POGZxI+w1JjffcsJLisoyX6FizKgUIBAvBQ1HuT8+GissYkfQO4LvB4gfwiFl3gE/eBBdd035lMggKli+5WtD12b1tGm80ZJKp29RnIxITqF1jtAYXNy4ad5nkuDO3lLuX8=; c=relaxed/simple; s=gdwg2y3kokkkj5a55z2ilkup5wp5hhxx; d=amazonses.com; t=1561360881; v=1; bh=F5zWlwCcXrsKE7RUQK0D2UqEMNTxvy5IYUWawAjlke4=; h=From:To:Cc:Bcc:Subject:Date:Message-ID:MIME-Version:Content-Type:X-SES-RECEIPT;\"},{\"name\":\"Received\",\"value\":\"by mail-ed1-f53.google.com with SMTP id w20so12638864edd.2 for <connect@morganstreetpartners.com>; Mon, 24 Jun 2019 00:21:20 -0700 (PDT)\"},{\"name\":\"DKIM-Signature\",\"value\":\"v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025; h=mime-version:from:date:message-id:subject:to; bh=qcd9lIHHM2K8OosQYY3dcWXkXajz2v6FDw0nar8MfVU=; b=jgrKB2dXJ+Wv9bg9qrKqz1HLrNhrmrZizLwvzEKr8+mv8uZfWnpJRwg6lhqKLssiDopH+WwrMT3M04eYp/xMnZ1ucVeYmSbwNSVqdAOSJDQc+6zD2GHPoqjWZVCW/m4kHBBgC1kbW3RUOdNrkefh2Qh1fXw+Hxpqa/u6qqedR77cpEFOnguVA6+29YIbOL46ZtsCzYchZiW9JJgLlgaEoDrOyJIXjt2KP2l5zZgmXhhPf4D2QenZcf4Oobj1jb3YnvWSuE+ZfTOmJvyOqiKkldaH1y/FphkA0EtnuGwMF2Cfk8B7yG9iuKWpiK2AweUh+X8k+8+3pZw+eczFG2h/6Q==\"},{\"name\":\"X-Google-DKIM-Signature\",\"value\":\"v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20161025; h=x-gm-message-state:mime-version:from:date:message-id:subject:to; bh=qcd9lIHHM2K8OosQYY3dcWXkXajz2v6FDw0nar8MfVU=; b=fNwDncY/SWkwYE0QW5QzPt2J4tsIQZtU3u05PNDG5t35GLFNn8KD00b5Dc4gJNodTM apEe2kCEA7pB8zt8/koqQ5vUqN20JDr/nxkHpLR2ndE8oclmSpYYnqQnNXQbeBbc70A9 OAWxTGR8ef9J8eABsQxnY4qSyRKBSRcbFn7uYggzG/zZ0SHEYxlTAQXlgGk+ljrZYDVc qsf6MwVUyO+x9hMhUJxECataqtiKERsMVv1uiFUTL+DB62IP2F+LsdS+TvLawJlbnwC6 3vL41bYiJDB86C39Vd+oAwCor4U8npw/jVghOY85vfc6292bYCNJp1Cx90F9xOFkb4FT hKJg==\"},{\"name\":\"X-Gm-Message-State\",\"value\":\"APjAAAUX7h28coP2XGKc+CsztKPm9WeJ1ByQ7j2n+sXUcr3EcbxAIbBw vWy1Widi+zcsgpE6wM5JCu0a7JCM9cjtQzEXAmpF9whe\"},{\"name\":\"X-Google-Smtp-Source\",\"value\":\"APXvYqwGOJUOzolMEz7wBBJHgl/Kq1Q9rCz1DdzyRqXN+GTh0ZB1uAfsUf5vTbQOd/6kqn5Uc1eEurb4UNeUowI/XXs=\"},{\"name\":\"X-Received\",\"value\":\"by 2002:a17:906:3098:: with SMTP id 24mr9404138ejv.106.1561360877817; Mon, 24 Jun 2019 00:21:17 -0700 (PDT)\"},{\"name\":\"MIME-Version\",\"value\":\"1.0\"},{\"name\":\"From\",\"value\":\"Ravi Patel <ravipatel.ce@gmail.com>\"},{\"name\":\"Date\",\"value\":\"Mon, 24 Jun 2019 12:51:04 +0530\"},{\"name\":\"Message-ID\",\"value\":\"<CA+P_d7S+5KsODoyho_gtZmL4iB5hhkh9n+rTky5JD8K9XnOFNg@mail.gmail.com>\"},{\"name\":\"Subject\",\"value\":\"test email subject\"},{\"name\":\"To\",\"value\":\"connect@morganstreetpartners.com\"},{\"name\":\"Content-Type\",\"value\":\"multipart/mixed; boundary=\\\"0000000000007d68f8058c0ca8c4\\\"\"}],\"commonHeaders\":{\"returnPath\":\"ravipatel.ce@gmail.com\",\"from\":[\"Ravi Patel <ravipatel.ce@gmail.com>\"],\"date\":\"Mon, 24 Jun 2019 12:51:04 +0530\",\"to\":[\"connect@morganstreetpartners.com\"],\"messageId\":\"<CA+P_d7S+5KsODoyho_gtZmL4iB5hhkh9n+rTky5JD8K9XnOFNg@mail.gmail.com>\",\"subject\":\"test email subject\"}},\"receipt\":{\"timestamp\":\"2019-06-24T07:21:20.478Z\",\"processingTimeMillis\":1376,\"recipients\":[\"connect@morganstreetpartners.com\"],\"spamVerdict\":{\"status\":\"PASS\"},\"virusVerdict\":{\"status\":\"PASS\"},\"spfVerdict\":{\"status\":\"PASS\"},\"dkimVerdict\":{\"status\":\"PASS\"},\"dmarcVerdict\":{\"status\":\"PASS\"},\"action\":{\"type\":\"S3\",\"topicArn\":\"arn:aws:sns:us-west-2:708610861541:new-email\",\"bucketName\":\"ses.email.attachments\",\"objectKeyPrefix\":\"\",\"objectKey\":\"iusasvbnq0o7la1jle1d7ltvpsn7ivn9laoi4701\"}}}",
        "Timestamp": "2019-06-24T07:21:21.870Z",
        "SignatureVersion": "1",
        "Signature": "h9sQX8COKvh1h+ip1P4glNbHohHAp0Sx5VwgelgKqN4eljztt1HBmEA0Bubogjg1TyC52xhwu21cGojydqMEZZqIFGmpaspGkt6bQDGAabfDdotvxNVoX3oQx2UFZ3NafMuTHzkIu+XQFIxQQVJw+p6ynfapz/oDmWSCRiNWLXAeNg9w0Z8wLCxQPMYhq+/JjNAjzm7SyyrP12LrWi9qRPrj/XBAxc2cIFzpXYOug1R9Ma+Wmdl3WhfOE3moBTzkfZo29uqXn7zaWeZAgw56vEqZGUsVuJCCAhk+cF4w6Z3GKSXiAnXIZ0oX/YRSLbXFYMdi+v/Jp9Z3+HBKeEtFSw==",
        "SigningCertUrl": "https://sns.us-west-2.amazonaws.com/SimpleNotificationService-6aad65c2f9911b05cd53efda11f913f9.pem",
        "UnsubscribeUrl": "https://sns.us-west-2.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-west-2:708610861541:new-email:d01751f6-e50b-46a2-b491-ea32edf8afb3",
        "MessageAttributes": {}
      }
    }
  ]
}


let lambdaModule = require('./../lambdaFunctions/emailProcessing.js')

lambdaModule.handler(event).then((result) => {
  console.log('Lambda resposne', result);
}).catch((err) => {
  console.log('Lambda error resposne', err);
});

